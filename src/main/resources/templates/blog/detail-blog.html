<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index::dynamic(~{::#main})}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>
<div id="main">
    <style>
        .card-no-border .card {
            border: 0px;
            border-radius: 4px;
            -webkit-box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05);
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05)
        }

        .card-body {
            -ms-flex: 1 1 auto;
            flex: 1 1 auto;
            padding: 1.25rem
        }

        .comment-widgets .comment-row:hover {
            background: rgba(0, 0, 0, 0.02);
            cursor: pointer;
        }

        .comment-widgets .comment-row {
            border-bottom: 1px solid rgba(120, 130, 140, 0.13);
            padding: 15px;
        }

        .comment-text:hover {
            visibility: hidden;
        }

        .comment-text:hover {
            visibility: visible;
        }

        .label {
            padding: 3px 10px;
            line-height: 13px;
            color: #ffffff;
            font-weight: 400;
            border-radius: 4px;
            font-size: 75%;
        }

        .round img {
            border-radius: 100%;
        }

        .label-info {
            background-color: #1976d2;
        }

        .label-success {
            background-color: green;
        }

        .label-danger {
            background-color: #ef5350;
        }

        .action-icons a {
            padding-left: 7px;
            vertical-align: middle;
            color: #99abb4;
        }

        .action-icons a:hover {
            color: #1976d2;
        }

    </style>
    <div th:replace="~{/layout/_menu::hero-normal-section}"></div>
    <!--    Breadcrumb Section Begin-->

    <button th:attr="ng-click=@{|commentBlog.getCommentInfo(${item.id})|}" id="autoClick" class="btn btn-outline-danger"
            style="display: none">[[#{dblog.click}]]
    </button>

    <script>
        setTimeout(function () {
            document.getElementById("autoClick").click();
        }, 2000);
    </script>

    <section class="breadcrumb-section set-bg p-3" style="background-color: #9BCA3C;">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text" style="font-size: 20px;">
                        <a th:href="@{/home/index}"><i class="fa fa-home" aria-hidden="true"></i> [[#{dblog.home}]]</a>
                        <i class="fa fa-chevron-right" aria-hidden="true"></i>
                        <a th:href="@{/stories/all}"><i aria-hidden="true"></i> [[#{lblog.stories}]]</a>
                        <i class="fa fa-chevron-right" aria-hidden="true"></i>
                        <span>[[#{dblog.storiesd}]]</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 ftco-animate" th:object="${item}">

                    <h2 class="mb-3 font-weight-bolder" th:text="*{title}"></h2>

<!--                    image blog carousel-->
					<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
					  <div class="carousel-inner">
					    <div th:each="image, iterStat : ${item.imageBlogs}" th:class="${iterStat.first} ? 'carousel-item active' : 'carousel-item'">
					      <img th:src="@{|${image.imageName}|}" class="d-block w-100" th:alt="${image.id}">
					    </div>
					  </div>
					  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
					    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					    <span class="sr-only">[[#{dblog.prev}]]</span>
					  </a>
					  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
					    <span class="carousel-control-next-icon" aria-hidden="true"></span>
					    <span class="sr-only">[[#{dblog.next}]]</span>
					  </a>
					</div>
					
					
<!--                     <div id="carouselExampleFade" class="carousel slide carousel-fade my-5" data-ride="carousel"> -->
<!--                         <div class="carousel-inner"> -->
<!--                             <div th:each="image, iterStat : ${item.imageBlogs}" th:class="${iterStat.first} ? 'carousel-item active' : 'carousel-item'"> -->
<!--                                 <img th:src="@{|${image.imageName}|}" class="d-block w-100" th:alt="${image.id}"> -->
<!--                             </div> -->
<!--                         </div> -->
<!--                         <button class="carousel-control-prev" type="button" data-target="#carouselExampleFade" data-slide="prev"> -->
<!--                             <span class="carousel-control-prev-icon" aria-hidden="true"></span> -->
<!--                             <span class="sr-only">[[#{dblog.prev}]]</span> -->
<!--                         </button> -->
<!--                         <button class="carousel-control-next" type="button" data-target="#carouselExampleFade" data-slide="next"> -->
<!--                             <span class="carousel-control-next-icon" aria-hidden="true"></span> -->
<!--                             <span class="sr-only">[[#{dblog.next}]]</span> -->
<!--                         </button> -->
<!--                     </div> -->

                    <p th:utext="*{content}"></p>

                    </p>

                    <div class="blog__details__content mt-5">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="blog__details__author">
                                    <div class="blog__details__author__pic">
                                        <img src="/assets/images/person/undraw_profile.svg" alt="">
                                    </div>
                                </div>
                                <div class="colorred pt-4 text-muted">
                                    <i class="fa fa-user-o" aria-hidden="true"></i> [[#{dblog.create}]]
                                    <a href="#" class="text-muted"><b>[[${item.user.username}]]</b></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">


                            <div class="blog__details__author__text" th:text:if="*{status=='1'}">
                                <div th:text:if="*{isDisplay=='true'}">[[#{dblog.status}]]</div>
                                <div>[[#{dblog.view}]]: [[*{viewCount}]]</div>
                                <div> [[#{dblog.date}]]:
                                    <script th:inline="javascript">
                                        var date = /*[[*{createDate}]]*/ '*{createDate}';
                                        document.write(moment(date).fromNow());
                                    </script>
                                </div>
                                <div class="blog__sidebar__item">
                                    <ul>
                                        <li>
                                            <b>[[#{dblog.cate}]]:</b>
                                            <a th:each="cate : ${categories}" href="#" class="mx-2">
                                                [[${cate.category.name}]]
                                            </a>
                                        </li>
                                    </ul>
                                </div>

                                <div class="blog__details__widget">
                                    <div class="blog__details__social">
                                        <a href="#"><i class="fa fa-facebook"></i></a>
                                        <a href="#"><i class="fa fa-twitter"></i></a>
                                        <a href="#"><i class="fa fa-google-plus"></i></a>
                                        <a href="#"><i class="fa fa-linkedin"></i></a>
                                        <a href="#"><i class="fa fa-envelope"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                    </div>
                    <div class="pt-5 mt-4">
                        <div class="row">
                            <div class="col-md-12">
                                <!--comment here-->
                                <commdiv class="card-body pt-0">
                                    <h4 class="card-title">[[#{dblog.recent}]]</h4>
                                    <h6 class="card-subtitle">[[#{dblog.latest}]]</h6></commdiv>

                                    <div ng-if="commentBlog.comments[0].title == null" class="p-5 text-center">
                                        <h3 class="text-muted"><i class="fa fa-comments" aria-hidden="true"></i></h3>
                                        <h4 class="text-muted"> [[#{dblog.nocmt}]]</h4>
                                        <h5 class="text-muted">[[#{dblog.bethe}]]</h5>
                                    </div>

                                <div class="comment-widgets m-b-20">

                                    <div ng-repeat="item in commentBlog.comments" class="d-flex flex-row comment-row">
                                        <div class="p-2"><span class="round"><img
                                                ng-src="{{item.customer.avatar}}" alt="user" width="50"></span>
                                        </div>
                                        <div class="comment-text w-100 pl-3">
                                            <div class="comment-footer justify-content-between mb-2 d-flex">
                                                <h5>{{item.title}}</h5>
                                                <span class="action-icons">
                                                         <span ng-if="item.customer.email == commentBlog.customer.email"
                                                               data-abc="true"><i class="fa fa-pencil"></i></span>
                                                         <span ng-if="item.customer.email == commentBlog.customer.email"
                                                               ng-click="commentBlog.delete(item.id)" data-abc="true"
                                                               class="mx-2"><i class="fa fa-trash-o"
                                                                               aria-hidden="true"></i></span>
                                                        <span class="date ml-3">{{item.createDate}}</span>
                                                    </span>
                                            </div>
                                            <div class="m-b-5 m-t-10" ng-bind-html="item.content"></div>

                                            <div class="comment-footer text-right">
                                                     <span class="action-icons">
                                                         <span ng-click="commentBlog.displayForm($index)"
                                                               ng-dblclick="commentBlog.deleteForm($index)"
                                                               data-abc="true"><i class="fa fa-reply-all"
                                                                                  aria-hidden="true"></i> [[#{dblog.reply}]]</span>
                                                     </span>
                                            </div>

                                            <!--                                            form reply comment here-->

                                            <form id="form-{{$index}}" class="mt-4" style="display:none;">
                                                <div class="form-group">
                                                    <textarea id="myTextarea-{{$index}}"></textarea></div>
                                                <div class="form-group text-right">
                                                    <a ng-if="commentBlog.customer.email == null"
                                                       class="text-danger font-italic"
                                                       th:href="@{/security/login/form}"><i class="fa fa-sign-in"
                                                                                            aria-hidden="true"></i>
                                                        [[#{dblog.please}]]</a>
                                                    <button ng-if="commentBlog.customer.email != null"
                                                            ng-click="commentBlog.createCommentReply(item.id)"
                                                            type="submit" class="btn py-2 px-4 btn-primary">[[#{dblog.post}]]
                                                    </button>
                                                </div>
                                            </form>

                                            <!--                                                item reply comment here-->
                                            <div ng-repeat="reply in commentBlog.commentReply"
                                                 ng-if="item.id == reply.commentsBlog.id"
                                                 class="d-flex flex-row comment-row">
                                                <div class="p-2"><span class="round"><img
                                                        ng-src="{{reply.customer.avatar}}" alt="user" width="50"></span>
                                                </div>
                                                <div class="comment-text w-100 pl-3">
                                                    <div class="comment-footer justify-content-between mb-2 d-flex">
                                                        <h5>{{reply.title}}</h5>
                                                        <span class="action-icons">
                                                         <span ng-if="reply.customer.email == commentBlog.customer.email"
                                                               data-abc="true"><i class="fa fa-pencil"></i></span>
                                                         <span ng-if="reply.customer.email == commentBlog.customer.email"
                                                               ng-click="commentBlog.delete(reply.id)" data-abc="true"
                                                               class="mx-2"><i class="fa fa-trash-o"
                                                                               aria-hidden="true"></i></span>
                                                        <span class="date ml-3">{{reply.createDate}}</span>
                                                    </span>
                                                    </div>
                                                    <div class="m-b-5 m-t-10" ng-bind-html="reply.content"></div>

                                                    <div class="comment-footer text-right">
                                                     <span class="action-icons">
                                                         <span ng-click="commentBlog.displayFormReply($index)"
                                                               ng-dblclick="commentBlog.deleteFormReply($index)"
                                                               data-abc="true"><i class="fa fa-reply-all"
                                                                                  aria-hidden="true"></i> [[#{dblog.reply}]]</span>
                                                     </span>
                                                    </div>

                                                    <!--                                            form reply comment here-->

                                                    <form id="formReply-{{$index}}" class="mt-4" style="display:none;">
                                                        <div class="form-group">
                                                            <textarea id="myTextareaReply-{{$index}}"></textarea></div>
                                                        <div class="form-group text-right">
                                                            <a ng-if="commentBlog.customer.email == null"
                                                               class="text-danger font-italic"
                                                               th:href="@{/security/login/form}"><i
                                                                    class="fa fa-sign-in" aria-hidden="true"></i> [[#{dblog.please}]]</a>
                                                            <button ng-if="commentBlog.customer.email != null"
                                                                    ng-click="commentBlog.createCommentReply(reply.id)"
                                                                    type="submit" class="btn py-2 px-4 btn-primary">[[#{dblog.post}]]
                                                            </button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- END comment-list -->
                        <script>
                            tinymce.init({
                                selector: "#myTextarea",
                                menubar: false,
                                toolbar_location: "bottom",
                                plugins: "autoresize link lists emoticons image",
                                autoresize_bottom_margin: 50,
                                max_height: 500,
                                placeholder: "Enter message . . .",
                                toolbar:
                                    "bold italic strikethrough link numlist bullist blockquote emoticons image"
                            });
                        </script>

                        <div class="comment-form-wrap pt-5  mb-5">
                            <h3 class="mb-2 h4 font-weight-bold p-4 bg-light">[[#{dblog.leave}]]</h3>
                            <form class="p-4 p-md-5 bg-light">
                                <div class="form-group">
                                    <textarea id="myTextarea"></textarea></div>
                                <div class="form-group text-right">
                                    <a ng-if="commentBlog.customer.email == null" class="text-danger font-italic"
                                       th:href="@{/security/login/form}"><i class="fa fa-sign-in"
                                                                            aria-hidden="true"></i> [[#{dblog.please}]]</a>
                                    <button ng-if="commentBlog.customer.email != null" ng-click="commentBlog.create()"
                                            type="submit" class="btn py-2 px-4 btn-primary">[[#{dblog.post}]]
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>


                <!-- .col-md-8 -->
                <div class="col-lg-4 col-md-5 order-md-1 order-2">
                    <div class="blog__sidebar">
                        <div class="blog__sidebar__search">
                            <form action="#">
                                <input type="text" placeholder="Search...">
                                <button type="submit"><span class="icon_search"></span></button>
                            </form>
                        </div>
                        <div class="blog__sidebar__item">
                            <h4>[[#{dblog.cate}]]</h4>
                            <ul>
                                <li th:each="cate : ${categories}"><a>[[${cate.category.name}]]</a></li>
                            </ul>
                        </div>
                        <div class="blog__sidebar__item">
                            <h4>[[#{lblog.recent}]]</h4>
                            <div th:each="a:${top3}" class="blog__sidebar__recent">
                                <a th:href="@{|${a.id}|}" class="blog__sidebar__recent__item">
                                    <div class="blog__sidebar__recent__item__pic">
                                        <img th:src="@{|${a.imageBlogs.get(0).imageName}|}" style="width:70px;height:70px;display: block;object-fit:cover;margin:1px;" alt="">
                                    </div>
                                    <div class="blog__sidebar__recent__item__text">
                                        <h6>[[${a.title}]]<br /></h6>
                                       <span>[[${a.createDate}]]</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="blog__sidebar__item">
                            <h4>[[#{lblog.search}]]</h4>
                            <div class="blog__sidebar__item__tags">
                                <a th:each="cate : ${categories}" th:href="@{|/stories/${cate.category.name}|}">[[${cate.category.name}]]</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- END COL -->
        </div>
    </section>

    <!-- Notification -->
    <div class="position-fixed bottom-0 right-0 p-3" style="z-index: 5; right: 0; bottom: 0;">
        <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000">
            <div class="toast-header">
                <img src="/assets/images/logo.png" class="rounded mr-2" alt="logo" width="30%">
                <strong class="mr-auto">[[#{noti.notification}]] SUNFOOD</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                <div class="alert alert-success" role="alert" ng-if="message != ''">
                    {{message}}
                </div>
                <div class="alert alert-danger" role="alert" ng-if="error != ''">
                    {{error}}
                </div>
            </div>
        </div>
    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
</body>
</html>
